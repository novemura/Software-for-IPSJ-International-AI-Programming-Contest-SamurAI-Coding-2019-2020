汎用的な方法として、現在位置から目的地までの最短の移動計画を考える。
例えば、以下のフィールド
ooxB
ooxo
oxxo
Aooo
に対して、穴埋めも実行可能として、最短の移動回数は以下となる。
3466
2355
1344
0123

o ：穴のないマス
x :穴のあるマス
A :侍
B :ゴール(穴なし)

既存のsamuraiDistanceのコードを使ってこの地図を作ることはでき、
A→Bまでの距離は最短で6回の移動を要求されることがわかる。
ここで、A→Bの最短経路は、B→Aで数字が減少するリストを作成し、そのリストを逆向きに実行するとA→Bの最短経路が求まる。
A→Bで数字が増加するリストでは最短でBに行く経路が保証されないので注意(上の例では初回に上に行く経路はNG)

実際には相手の行動(穴埋めや進路妨害)のリスクも計算する必要があることに注意